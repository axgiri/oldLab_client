{
  "info": {
    "name": "OldLab API Tests",
    "_postman_id": "486d7a51-537b-427a-83d7-2f07c9634efa",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Postman collection for testing OldLab REST API"
  },
  "item": [
    {
      "name": "Activate",
      "item": [
        {
          "name": "Activate account",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/activate/activate"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"phone_number\": \"{{phoneNumber}}\",\n    \"otp\": 1234\n}"
            }
          }
        },
        {
          "name": "Send OTP",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/activate/send/activate/{{phoneNumber}}"
            }
          }
        },
        {
          "name": "Resend OTP",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/activate/resend/activate/{{phoneNumber}}"
            }
          }
        },
        {
          "name": "Login with OTP",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/activate/login"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"phone_number\": \"{{phoneNumber}}\",\n    \"otp\": 1234\n}"
            }
          }
        },
        {
          "name": "Send Login OTP",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/activate/send/login/{{phoneNumber}}"
            }
          }
        }
      ]
    },
    {
      "name": "Person",
      "item": [
        {
          "name": "Signup",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/persons/signup"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone_number\": \"{{phoneNumber}}\",\n    \"password\": \"Pass1234\",\n    \"role\": \"USER\",\n    \"is_active\": false\n}"
            }
          }
        },
        {
          "name": "Async Signup",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/persons/async/signup"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone_number\": \"{{phoneNumber}}\",\n    \"password\": \"Pass1234\",\n    \"role\": \"USER\",\n    \"is_active\": false\n}"
            }
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/persons/login"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"phone_number\": \"{{phoneNumber}}\",\n    \"password\": \"Pass1234\"\n}"
            }
          }
        },
        {
          "name": "Find by ID",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/persons/findById/{{id}}"
            }
          }
        },
        {
          "name": "Find by phone number",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/persons/findByPhoneNumber/{{phoneNumber}}"
            }
          }
        },
        {
          "name": "Async Update",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/persons/async/update/{{id}}"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe Updated\",\n    \"phone_number\": \"{{phoneNumber}}\",\n    \"password\": \"Pass1234\",\n    \"role\": \"USER\",\n    \"is_active\": true\n}"
            }
          }
        },
        {
          "name": "Delete",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/persons/delete/{{id}}"
            }
          }
        },
        {
          "name": "Validate token",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/persons/validate"
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{token}}"
              }
            ]
          }
        },
        {
          "name": "Get role name",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/persons/getRoleName"
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{token}}"
              }
            ]
          }
        },
        {
          "name": "Get colleagues",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/persons/getMyColleagues"
            },
            "header": [
              {
                "key": "Authorization",
                "value": "{{token}}"
              }
            ]
          }
        },
        {
          "name": "Update password",
          "request": {
            "method": "PUT",
            "url": {
              "raw": "{{base_url}}/persons/updatePassword?oldPassword={{oldPassword}}"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"phone_number\": \"{{phoneNumber}}\",\n    \"password\": \"NewPass1234\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Photos",
      "item": [
        {
          "name": "Upload person photo",
          "request": {
            "method": "PUT",
            "url": {
              "raw": "{{base_url}}/photos/persons/{{id}}"
            },
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": ""
                }
              ]
            }
          }
        },
        {
          "name": "Get person photo",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/photos/persons/{{id}}"
            }
          }
        },
        {
          "name": "Upload shop photo",
          "request": {
            "method": "PUT",
            "url": {
              "raw": "{{base_url}}/photos/shops/{{id}}"
            },
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": ""
                }
              ]
            }
          }
        },
        {
          "name": "Get shop photo",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/photos/shops/{{id}}"
            }
          }
        }
      ]
    },
    {
      "name": "Review",
      "item": [
        {
          "name": "Create review",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/reviews"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"author_id\": {{personId}},\n    \"rating\": 5,\n    \"person_id\": {{personId}},\n    \"shop_id\": {{shopId}},\n    \"comment\": \"Great!\"\n}"
            }
          }
        },
        {
          "name": "Get reviews by shopId",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/reviews/shop/{{shopId}}"
            }
          }
        },
        {
          "name": "Get reviews by personId",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/reviews/person/{{personId}}"
            }
          }
        },
        {
          "name": "Get all reviews",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/reviews"
            }
          }
        },
        {
          "name": "Delete review",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{base_url}}/reviews/{{id}}"
            }
          }
        }
      ]
    },
    {
      "name": "Shop",
      "item": [
        {
          "name": "Create shop",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{base_url}}/shops/async/create"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Bookstore\",\n    \"address\": \"123 Main St\",\n    \"phone_number\": \"+11234567890\",\n    \"photo_header\": \"http://example.com/photo.jpg\",\n    \"description\": \"All the books\",\n    \"category\": [\"BOOKS\"]\n}"
            }
          }
        },
        {
          "name": "Get shop",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/shops/{{shopId}}"
            }
          }
        },
        {
          "name": "Get all shops",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/shops"
            }
          }
        },
        {
          "name": "Update shop",
          "request": {
            "method": "PUT",
            "url": {
              "raw": "{{base_url}}/shops/async/{{shopId}}"
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Updated Bookstore\",\n    \"address\": \"123 Main St\",\n    \"phone_number\": \"+11234567890\",\n    \"photo_header\": \"http://example.com/photo2.jpg\",\n    \"description\": \"All the updated books\",\n    \"category\": [\"BOOKS\"]\n}"
            }
          }
        },
        {
          "name": "Delete shop",
          "request": {
            "method": "DELETE",
            "url": {
              "raw": "{{base_url}}/shops/{{shopId}}"
            }
          }
        },
        {
          "name": "Get shops by category",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/shops/category?category={{category}}"
            }
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080/api/v1",
      "type": "string"
    },
    {
      "key": "phoneNumber",
      "value": "+12345678901",
      "type": "string"
    },
    {
      "key": "id",
      "value": "1",
      "type": "string"
    },
    {
      "key": "token",
      "value": "Bearer YOUR_JWT_TOKEN",
      "type": "string"
    },
    {
      "key": "oldPassword",
      "value": "oldPass123",
      "type": "string"
    },
    {
      "key": "shopId",
      "value": "1",
      "type": "string"
    },
    {
      "key": "personId",
      "value": "1",
      "type": "string"
    },
    {
      "key": "category",
      "value": "BOOKS",
      "type": "string"
    }
  ]
}